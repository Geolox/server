{"version":3,"sources":["../../../../server/components/queue/twitter.js"],"names":[],"mappings":";;AAAC,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,MAAM,CAAC,OAAO,GAAG,UAAS,MAAM,EAAC;;AAE7B,QAAI,qBAAqB,GAAG,SAAxB,qBAAqB,CAAY,UAAU,EAAE;AAC7C,YAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;KACxB,CAAA;;AAED,QAAI,CAAC,WAAW,GAAC,EAAE,EACnB,IAAI,CAAC,eAAe,GAAG,EAAE,EACzB,IAAI,CAAC,EAAE,GAAG,EAAE,EACZ,IAAI,CAAC,MAAM,GAAG,qBAAqB,EACnC,IAAI,CAAC,KAAK,GAAG,qBAAqB,EAClC,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC;AACvC,QAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,QAAI,IAAI,GAAG,CAAA,UAAS,GAAG,EAAC;AACpB,YAAI,CAAC,EAAE,GAAG,IAAI,OAAO,CAAC;AAClB,wBAAY,EAAE,GAAG,CAAC,YAAY;AAC9B,2BAAe,EAAE,GAAG,CAAC,eAAe;AACpC,4BAAgB,EAAE,MAAM,CAAC,gBAAgB;AACzC,+BAAmB,EAAE,GAAG,CAAC,mBAAmB;SAC/C,CAAC,CAAC;AACH,YAAI,CAAC,eAAe,GAAG,GAAG,CAAC,eAAe,CAAC;KAC9C,CAAA,CAAC,MAAM,CAAC,CAAC;;AAEV,WAAO;AACH,oBAAY,EAAC,sBAAS,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,SAAS,EAAC;AAC9C,oBAAQ,SAAS,CAAC,MAAM;AACpB,qBAAK,CAAC;AACF,wBAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAAA,AAC/B,qBAAK,CAAC;AACF,wBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AAAA,AACvB,qBAAK,CAAC;AACF,wBAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,aAC5B;;AAED,gBAAI,cAAc,GAAG,SAAjB,cAAc,CAAY,MAAM,EAAE;AAClC,oBAAI,CAAC,WAAW,GAAG,MAAM,CAAC;AAC1B,sBAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAC/B,sBAAM,CAAC,EAAE,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC5B,sBAAM,CAAC,EAAE,CAAC,SAAS,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACvC,CAAC;AACF,gBAAI,KAAK,GAAG,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;AAC9B,gBAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAC,KAAK,EAAC,cAAc,CAAC,CAAC;SAC7D;AACD,mBAAW,EAAC,uBAAU;AAClB,gBAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;SAC9B;KACJ,CAAA;CACJ,CAAA","file":"twitter.js","sourcesContent":["ï»¿var twitter = require('ntwitter');\r\nvar util = require('util');\r\nmodule.exports = function(config){\r\n    //default event handler\r\n    var default_event_handler = function(event_data) {\r\n        util.log(event_data);\r\n    }\r\n    //private\r\n    this.curr_stream=\"\",\r\n    this.stream_endpoint = \"\",\r\n    this.tt = {},\r\n    this.ondata = default_event_handler,\r\n    this.onend = default_event_handler,\r\n    this.ondestroy = default_event_handler;\r\n    var that = this;\r\n    //constructor\r\n    var init = function(cfg){\r\n        that.tt = new twitter({\r\n            consumer_key: cfg.consumer_key,\r\n            consumer_secret: cfg.consumer_secret,\r\n            access_token_key: config.access_token_key,\r\n            access_token_secret: cfg.access_token_secret\r\n        });\r\n        that.stream_endpoint = cfg.stream_endpoint;\r\n    }(config);\r\n    //public\r\n    return {\r\n        start_stream:function(root,ondata,onend,ondestroy){\r\n            switch (arguments.length){\r\n                case 4:\r\n                    that.ondestroy = ondestroy;\r\n                case 3:\r\n                    that.onend = onend;\r\n                case 2:\r\n                    that.ondata = ondata;\r\n            }\r\n            \r\n            var stream_handler = function(stream) {\r\n                that.curr_stream = stream;\r\n                stream.on('data', that.ondata);\r\n                stream.on('end',that.onend);\r\n                stream.on('destroy',that.ondestroy);\r\n            };\r\n            var track = { track: [root] };\r\n            that.tt.stream(that.stream_endpoint,track,stream_handler);\r\n        },\r\n        stop_stream:function(){\r\n            that.curr_stream.destroy();\r\n        }\r\n    }\r\n}"]}